define("mod_trainingevent/attendance",["exports","core_form/modalform","core/str","core/toast","core/notification"],(function(_exports,_modalform,_str,_toast,_notification){var obj;
/**
   * mod_trainingevent attendance Modal form.
   *
   * @module     mod_trainingevent
   * @copyright  2024 E-Learn Design
   * @author     Derick Turner
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modalform=(obj=_modalform)&&obj.__esModule?obj:{default:obj};const selectors_showAttendanceform='[data-action="show-Attendanceform"]';_exports.init=()=>{const showAttendanceform=document.querySelectorAll(selectors_showAttendanceform);if(null!==showAttendanceform)for(let i=0;i<showAttendanceform.length;i++)showAttendanceform[i].addEventListener("click",(event=>{event.preventDefault();const attendanceID=showAttendanceform[i].getAttribute("data-attendanceid"),waitListed=showAttendanceform[i].getAttribute("data-waitlisted"),approvalType=showAttendanceform[i].getAttribute("data-approvaltype");var title=(0,_str.get_string)("attend","trainingevent");title=0!=attendanceID?0==waitListed?(0,_str.get_string)("updateattendance","trainingevent"):(0,_str.get_string)("updatewaitlist","trainingevent"):0==waitListed?0==approvalType?(0,_str.get_string)("attend","trainingevent"):(0,_str.get_string)("request","trainingevent"):(0,_str.get_string)("waitlist","trainingevent");const form=new _modalform.default({formClass:"mod_trainingevent\\form\\attendance",args:{companyid:showAttendanceform[i].getAttribute("data-companyid"),trainingeventid:showAttendanceform[i].getAttribute("data-trainingeventid"),cmid:showAttendanceform[i].getAttribute("data-cmid"),waitlisted:waitListed,attendanceid:attendanceID,approvaltype:approvalType,userid:showAttendanceform[i].getAttribute("data-userid"),courseid:showAttendanceform[i].getAttribute("data-courseid"),requesttype:showAttendanceform[i].getAttribute("data-requesttype"),dorefresh:showAttendanceform[i].getAttribute("data-dorefresh")},modalConfig:{title:title},returnFocus:showAttendanceform[i]});form.show().then((()=>((0,_toast.addToastRegion)(form.modal.getRoot()[0]),!0))).catch(_notification.exception),form.addEventListener(form.events.FORM_SUBMITTED,(e=>{form.modal.getRoot()[0].querySelectorAll(".toast-wrapper").forEach((reg=>reg.remove())),e.detail.result&&""!=e.detail.returnmessage&&(0,_toast.add)(e.detail.returnmessage,{type:"success"}),e.detail.dorefresh&&location.reload(!1);var userID=e.detail.userid,bookingNotes=document.querySelector("[data-bookingnotesid='"+userID+"']"),currentNotes=bookingNotes.getAttribute("data-content"),textFrom="<br>"+e.detail.oldnotes+"</div>",textTo="<br>"+e.detail.newnotes+"</div>";bookingNotes.setAttribute("data-content",currentNotes.replace(textFrom,textTo))}))}))}}));

//# sourceMappingURL=attendance.min.js.map