define(["jquery","core/ajax","core/notification","core/str"],(function(e,i,o,r){return{init:function(){window.addEventListener("load",(function(){var i,o;jQuery(document).ready((function(e){if(e("#page-mod-videofile-view h2").removeClass("hidden-xs hidden-sm hidden-md hidden-lg"),e("#id_videoprogressenabled").length>0){var i=e("#id_videoprogressenabled");i.watch("disabled",(function(){i.is(":disabled")&&i.parent(".form-checkbox").addClass("form-disabled")})),i.on("click",(function(){e(this).is(":checked")?e("#id_completionview").prop({checked:!1,disabled:!0}):(e("#id_completionview").prop({checked:!0,disabled:!1}),e("#id_completionview").parent(".form-checkbox").removeClass("form-disabled"))}))}if(e("#id_completionview").length>0){var o=e("#id_completionview");o.on("click",(function(){e(this).is(":checked")?(e("#id_videoprogressenabled").prop({checked:!1,disabled:!0}),e("#id_videoprogress").prop("disabled",!0)):(e("#id_videoprogressenabled").prop({checked:!0,disabled:!1}),e("#id_videoprogress").prop("disabled",!1),e("#id_videoprogressenabled").parent(".form-checkbox").removeClass("form-disabled"))})),o.watch("disabled",(function(){o.is(":disabled")&&o.parent(".form-checkbox").addClass("form-disabled")}))}e("#id_completion").on("change",(function(){"2"==e(this).val()&&e("body#page-mod-videofile-mod .form-checkbox").removeClass("form-disabled")}))})),e.uaMatch=function(e){e=e.toLowerCase();var i=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:i[1]||"",version:i[2]||"0"}},o={},(i=e.uaMatch(navigator.userAgent)).browser&&(o[i.browser]=!0,o.version=i.version),o.chrome?o.webkit=!0:o.webkit&&(o.safari=!0),e.browser=o,e.fn.watch=function(i,o,r){return r||(r=10),this.each((function(){var n=e(this),a={props:i.split(","),func:o,vals:[]};e.each(a.props,(function(e){a.vals[e]=n.attr(a.props[e])})),n.data(a),"object"==typeof this.onpropertychange?n.bind("propertychange",o):e.browser.mozilla?n.bind("DOMAttrModified",o):setInterval((function(){d.call(this,n)}),r)}));function d(e){for(var i=e.data(),o=!1,r="",d=0;d<i.props.length;d++)if(r=e.attr(i.props[d]),i.vals[d]!=r){i.vals[d]=r,o=!0;break}o&&i.func&&i.func.call(e,i)}}}),!1)}}}));