define(["jquery","core/ajax","core/notification","core/str"],(function(e,t,i,n){return{init:function(n){var o;no_save=!1,t.call([{methodname:"mod_videofile_data_for_video_attempt",args:{attempt_id:0,countstatus:0,cmid:n,seekval:0,percentage:0,second:0,course:0,id:0},done:function(t){var i=JSON.parse(JSON.stringify(t));o=i;var n=JSON.parse(JSON.stringify(o.last)),a=e("video[id^=videofile-]").attr("id");n.second>0&&(document.getElementById(a).currentTime=n.second,document.getElementById(a).play())},fail:i.exception}]),setInterval((function(){video=document.getElementsByTagName("video"),percent=100/video[0].duration*video[0].currentTime,t.call([{methodname:"mod_videofile_data_for_video_attempt",args:{attempt_id:0,countstatus:0,cmid:n,seekval:0,percentage:parseInt(percent),second:video[0].currentTime,course:courseid,id:o.current_id},done:function(e){var t=JSON.parse(JSON.stringify(e));o=t;var i=JSON.parse(JSON.stringify(o.last));o=t,i.second>0&&(post("seekTo",i.second),post("play"))},fail:i.exception}])}),1e4)}}}));