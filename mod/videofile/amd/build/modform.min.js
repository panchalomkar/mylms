define(["jquery","core/ajax","core/notification","core/str"],(function(e,d,o,l){return{init:function(){window.addEventListener("load",(function(){e(document).ready((function(){var d=l.get_string("file_type_not_supported","mod_videofile");""!=e("#id_error_videos").text().trim()&&(e.when(d).done((function(d){e("#video-upload-button .pad-no label").html(d).css("color","#f55145")})),e("#upload-video-button").removeClass("disabled")),e("#upload-video-button").click((function(){e(this).hasClass("disabled")||(e("#video-upload-hidden .fm-loaded ").hasClass("fm-noitems")||e("#video-upload-hidden .fm-loaded ").hasClass("fm-nomkdir")?e("#video-upload-hidden .dndupload-arrow").click():e("#video-upload-hidden .fp-file").click())})),e("#upload-posters-button").click((function(){e("#posters-upload-hidden .fm-loaded ").hasClass("fm-noitems")||e("#posters-upload-hidden .fm-loaded ").hasClass("fm-nomkdir")?e("#posters-upload-hidden .dndupload-arrow").click():e("#posters-upload-hidden .fp-file").click()})),e("#posters-upload-placeholder").click((function(){""!=e("#posters-upload-hidden .fp-filename").text().trim()&&"Files"!=e("#posters-upload-hidden .fp-filename").text().trim()&&e("#posters-upload-placeholder").hasClass("posters-placeholder")&&e("#posters-upload-hidden .fp-filename").click()})),e("#upload-captions-button").click((function(){e("#captions-upload-hidden .fm-loaded ").hasClass("fm-noitems")||e("#captions-upload-hidden .fm-loaded ").hasClass("fm-nomkdir")?e("#captions-upload-hidden .dndupload-arrow").click():e("#captions-upload-hidden .fp-file").click()})),e("#video-upload-placeholder").click((function(){""!=e("#video-upload-hidden .fp-filename").text().trim()&&"Files"!=e("#video-upload-hidden .fp-filename").text().trim()&&e("#video-upload-placeholder").hasClass("video-placeholder")&&e("#video-upload-hidden .fp-filename").click()}));var o=l.get_string("file_type_not_supported","mod_videofile");e("#id_submitbutton2").click((function(){if(0==e("#video-upload-placeholder").text().indexOf("Upload")&&""==e("#id_video_url").val())return e.when(o).done((function(d){e("#video-upload-button .pad-no label").html(d).css("color","#f55145")})),!1})),window.setInterval((function(){if(-1!==e("#posters-upload-placeholder").text().indexOf("Choose")&&(e("#posters-upload-placeholder").attr("style")&&(e("#posters-upload-placeholder").removeClass("posters-placeholder"),e("#posters-upload-placeholder").removeAttr("style")),e("#posters-upload-hidden .fm-loaded .ygtvtable").hasClass("fp-folder")&&e("#posters-upload-placeholder").text(e("#posters-upload-hidden .fp-filename").text()),e("a.fp-vb-details")[0].length>0&&e("a.fp-vb-details")[0].click()),-1!==e("#video-upload-placeholder").text().indexOf("Upload")||-1!==e("#video-upload-placeholder").text().indexOf("Files")){if(e("#video-upload-placeholder").attr("style")&&(e("#video-upload-placeholder").removeClass("video-placeholder"),e("#video-upload-placeholder").removeAttr("style")),e("#video-upload-hidden .fm-loaded .ygtvtable").hasClass("fp-folder")){var d=e("#video-upload-hidden .fp-filename").text();e("#video-upload-placeholder").text(d)}e("a.fp-vb-details")[0].length>0&&e("a.fp-vb-details")[0].click()}if(e("#video-upload-hidden .fm-loaded").hasClass("fm-noitems")){var o=l.get_string("upload_video_placeholder","mod_videofile");e.when(o).done((function(d){e("#video-upload-placeholder").text(d)})),e("#id_video_url").prop("disabled",!1),e("input[name='video_enabled']").val("0")}else""!=e("#video-upload-hidden .fp-filename").text().trim()&&"Files"!==e("#video-upload-hidden .fp-filename").text().trim()&&(e("#video-upload-placeholder").addClass("video-placeholder"),e("#video-upload-placeholder").text(e("#video-upload-hidden .fp-filename").text()).css({color:"#1ba2dd",cursor:"pointer"}));""!=e("#id_video_url").val().trim()?e("#upload-video-button").addClass("disabled"):e("#upload-video-button").removeClass("disabled");o=l.get_string("choose_file","mod_videofile");e("#posters-upload-hidden .fm-loaded ").hasClass("fm-noitems")?(e.when(o).done((function(d){e("#posters-upload-placeholder").text(d)})),e("#upload-posters-button").prop("disabled",!1)):(""!=e("#posters-upload-hidden .fp-filename").text(o)&&(e("#posters-upload-placeholder").addClass("posters-placeholder"),e("#posters-upload-placeholder").text(e("#posters-upload-hidden .fp-filename").text()).css({color:"#1ba2dd",cursor:"pointer"})),e("#upload-posters-button").prop("disabled",!0)),e("#captions-upload-hidden .fm-loaded ").hasClass("fm-noitems")?e.when(o).done((function(d){e("#captions-upload-placeholder").text(d)})):""!=e("#captions-upload-hidden .fp-filename").text().trim()&&e("#captions-upload-placeholder").text(e("#captions-upload-hidden .fp-filename").text())}),1e3)}))}),!1)}}}));