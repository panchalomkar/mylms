{"version":3,"file":"customizer.min.js","sources":["../src/customizer.js"],"sourcesContent":["/* eslint-disable no-console */\n/* eslint-disable no-undef */\n// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @module     theme_remui/customizer\n * @copyright  (c) 2023 WisdmLabs (https://wisdmlabs.com/)\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @author     Yogesh Shirsath\n */\n\nimport $ from \"jquery\";\nimport Ajax from \"core/ajax\";\nimport Notification from \"core/notification\";\nimport ModalFactory from \"core/modal_factory\";\nimport \"core/modal_save_cancel\";\nimport ModalEvents from \"core/modal_events\";\nimport Utils from \"theme_remui/customizer/utils\";\nimport globalSite from \"theme_remui/customizer/global-site\";\nimport globalBody from \"theme_remui/customizer/global-body\";\nimport globalColors from \"theme_remui/customizer/global-colors\";\nimport globalHeading from \"theme_remui/customizer/global-heading\";\nimport globalButtons from \"theme_remui/customizer/global-buttons\";\nimport headerLogo from \"theme_remui/customizer/header-logo\";\nimport headerSiteDesign from \"theme_remui/customizer/header-design\";\nimport footer from \"theme_remui/customizer/footer\";\nimport additionalSettings from \"theme_remui/customizer/additional-settings\";\nimport iconsettings from \"theme_remui/customizer/icon-settings\";\nimport quickSetup from \"theme_remui/customizer/quicksetup-settings\";\nimport login from \"theme_remui/customizer/login\";\nimport \"theme_remui/color-picker\";\nimport feedbackcollection from  \"theme_remui/feedbackcollection\";\n\n/**\n * Ajax promise requests\n */\nvar PROMISES = {\n    /**\n     * Save settings to database\n     * @param {Array} settings Settings string\n     * @param {Object} options Additional options.\n     * @return {Promise}\n     */\n    SAVE_SETTINGS: (settings, options) => {\n        if (options == undefined) {\n            options = {};\n        }\n        return Ajax.call([{\n            methodname: \"theme_remui_customizer_save_settings\",\n            args: {\n                settings: JSON.stringify(settings),\n                options: JSON.stringify(options)\n            },\n        }])[0];\n    },\n};\n\n/**\n * Customizer panel settings handler.\n */\nvar handlers = [\n    globalSite,\n    globalBody,\n    globalColors,\n    globalHeading,\n    globalButtons,\n    headerLogo,\n    headerSiteDesign,\n    footer,\n    additionalSettings,\n    iconsettings,\n    quickSetup,\n    login,\n];\n\n/**\n * Selectors\n */\nvar SELECTOR = {\n    CUSTOMIZER: \"#customizer\",\n    CONTROLS: \"#customize-controls\",\n    MODE_TOGGLE: \"#customize-controls .mode-toggle\",\n    WRAP: \"#customizer-wrap\",\n    CLOSE_CUSTOMIZER: \".customize-controls-close\",\n    CUSTMIZER_TOGGLE: \".customizer-controls-toggle\",\n    COLOR_SETTING: \".setting-type-color\",\n    PUBLISH: \"#publish-settings\",\n    IFRAME: \"#customizer-frame\",\n    MAIN_OVERLAY: \"#main-overlay\",\n    PANEL_LINK: \"[sidebar-panel-link]\",\n    PANEL_BACK: \".customize-panel-back\",\n    PANEL: \".sidebar-panel\",\n    PANEL_ID: \"panel-id\",\n    PREVIOUS: \"previous\",\n    CURRENT: \"current\",\n    NEXT: \"next\",\n    SETTINGS_RESET: \"#reset-settings\",\n    INPUT_RESET: \".input-reset\",\n    SELECT_RESET: \".select-reset\",\n    CHECKBOX_RESET: \".checkbox-reset\",\n    COLOR_RESET: \".color-reset\",\n    TEXTAREA_RESET: \".textarea-reset\",\n    HTMLEDITOR_RESET: \".htmleditor-reset\",\n    HEADING_TOGGLE: \".heading-toggle\",\n    RANGEINPUT: \".form-range\",\n    SETTINGS_SAVE_MODAL: \"#settings-save-modal\"\n};\n\nvar CONSTANTS = {\n    NIGHTEYESTATE: 'nighteyewState',\n    CURRNIGHTEYESTATE: 'currnighteyewState'\n};\n\n/**\n * Apply settings on iframe load.\n */\nfunction applySettings() {\n    handlers.forEach(handler => handler.apply());\n    // Trigger apply so external js can handle customizer apply.\n    $(document).trigger(\"edwiser.customizer.apply\");\n}\n\n/**\n * Initialize setting change handler.\n */\nfunction initHandlers() {\n    handlers.forEach(handler => handler.init());\n    // Trigger init so external js can handle customizer init.\n    $(document).trigger(\"edwiser.customizer.init\");\n}\n\n/**\n * Field reset handlers.\n */\nfunction resetHandlers() {\n    // Color reset.\n    $(SELECTOR.COLOR_RESET).on(\"click\", function() {\n        let color = $(this).data(\"default\");\n        $(this).closest('.form-group').find(\"input\").spectrum(\"set\", color);\n        $(this).closest('.form-group').find(\"input\").trigger(\"color.changed\", color);\n    });\n\n    // Checkbox reset.\n    $(SELECTOR.CHECKBOX_RESET).on(\"click\", function() {\n        let value = $(this).data(\"default\");\n        $(this).closest('.form-group').find(\"input\").prop(\n            \"checked\",\n            $(this).closest('.form-group').find(\"input\").val() == value\n        );\n        $(this).closest('.form-group').find(\"input\").trigger(\"change\").trigger(\"input\");\n    });\n\n    // Reset select.\n    $(SELECTOR.SELECT_RESET).on(\"click\", function() {\n        let value = $(this).data(\"default\");\n        $(this).closest('.form-group').find(\"select\").val(value).trigger(\"input\").trigger(\"change\");\n    });\n\n    // Reset input.\n    $(SELECTOR.INPUT_RESET).on(\"click\", function() {\n        let value = $(this).data(\"default\");\n        $(this).closest('.form-group').find(\"input\").val(value).trigger(\"input\").trigger(\"change\");\n    });\n\n\n    // Reset textarea.\n    $(SELECTOR.TEXTAREA_RESET).on(\"click\", function() {\n        let value = $(this).data(\"default\");\n        $(this)\n            .closest('.form-group')\n            .find(\"textarea\")\n            .val(value)\n            .trigger(\"input\")\n            .trigger(\"change\");\n    });\n\n    // Reset htmleditor.\n    $(SELECTOR.HTMLEDITOR_RESET).on(\"click\", function() {\n        let value = $(this).data(\"default\");\n        let textarea = $(this).closest('.form-group').find(\"textarea\");\n        $(this)\n            .closest('.form-group')\n            .find(`#${textarea.attr(\"id\")}editable`)\n            .html(value);\n        textarea.val(value).trigger(\"input\").trigger(\"change\");\n    });\n}\n\n/**\n * Handle page load and link change of iframe.\n * When loaded or link changed, reapplying all settings.\n */\nfunction iframeHandler() {\n    var contentDocument = Utils.getDocument();\n    var contentWindow = Utils.getWindow();\n\n    $(contentDocument).find(\"body\").addClass(\"customizer-opened\");\n    $(contentDocument)\n        .find(\".customizer-editing-icon\")\n        .closest(\"a\")\n        .addClass(\"d-none\")\n        .removeClass(\"d-flex\");\n    $(contentDocument)\n        .find(\"#edwpersonalizer-settings .activatepersonalizer\")\n        .addClass('d-none');\n    $(contentDocument)\n        .find(\"#edwpersonalizer-settings .activepersonalizer\")\n        .removeClass('d-none');\n    $(contentDocument).find(\"#sidebar-setting\").addClass(\"d-none\");\n    $(contentDocument).find(\".nav-darkmode\").addClass('d-none').removeClass('d-flex');\n    $(document).trigger(\"remui-adjust-left-side\");\n\n    // Change browser url on iframe navigation.\n    window.history.replaceState(\n        \"pagechange\",\n        document.title,\n        M.cfg.wwwroot +\n        \"/theme/remui/customizer.php?url=\" +\n        encodeURI(contentWindow.location.href)\n    );\n\n    // Set current iframe url to customizer close button.\n    $(SELECTOR.CLOSE_CUSTOMIZER).attr(\"href\", contentWindow.location.href);\n\n    // Apply setting on iframe load.\n    applySettings();\n\n    // Hide overlay when iframe loaded.\n    Utils.hideLoader();\n\n    setTimeout(() => {\n        // Iframe on unload event.\n        contentWindow.onbeforeunload = function() {\n            console.log('Iframe navigated.');\n            Utils.showLoader();\n        };\n    }, 2000);\n}\n\n/**\n * Get settings array which preserve settings before reset.\n * @returns {array} Settings array\n */\nfunction preserveResetSettings() {\n    let element,\n    settings = [],\n    ids = [\n        'customcss',\n        'facebooksetting',\n        'twittersetting',\n        'linkedinsetting',\n        'gplussetting',\n        'youtubesetting',\n        'instagramsetting',\n        'pinterestsetting',\n        'quorasetting',\n        'whatsappsetting',\n        'telegramsetting',\n        'footerprivacypolicy',\n        'footertermsandconditions',\n        'brandlogotext',\n        'footercolumn',\n        'footercolumnsize',\n        'poweredbyedwiser',\n        'footerprivacypolicyshow'\n    ];\n    for (let i = 1; i <= 4; i++) {\n        ids.push('footercolumn' + i + 'type');\n        ids.push('footercolumn' + i + 'title');\n        ids.push('footercolumn' + i + 'customhtml');\n        ids.push('socialmediaiconcol' + i);\n        ids.push('footercolumn' + i + 'social');\n        ids.push('footercolumn' + i + 'menu');\n    }\n    ids.forEach(id => {\n        element = $('[name=\"' + id + '\"]');\n        element.closest('.fitem').find('.reset-button').trigger('click');\n        if (element.is('[type=\"checkbox\"]')) {\n            settings.push({\n                name: id,\n                value: element.is(':checked')\n            });\n        } else if (element.is('select[multiple]')) {\n            element.val().forEach(value => {\n                settings.push({\n                    name: id,\n                    value: value\n                });\n            });\n        } else {\n            settings.push({\n                name: id,\n                value: element.val()\n            });\n        }\n\n    });\n    return settings;\n}\n\n/**\n * Reset all settings.\n * It also shows confirmation modal.\n */\nfunction resetAllSettingHandler() {\n    let body = M.util.get_string(\"reset-settings-description\", \"theme_remui\");\n    body += '<ul class\"pl-5\">';\n    [\n        'customcss',\n        'socialall',\n        'loginpagesitedescription',\n        'footerprivacypolicy',\n        'footertermsandconditions',\n        'footercolumnsettings'\n    ].forEach(id => {\n        body += '<li>' + M.util.get_string(id, 'theme_remui') + '</li>';\n    });\n\n    body += '</ul>';\n    ModalFactory.create({\n            title: M.util.get_string(\"reset\", \"moodle\"),\n            body: body,\n            type: ModalFactory.types.SAVE_CANCEL,\n        },\n        $(\"#create-modal\")\n    ).done(modal => {\n        modal.show();\n        var root = modal.getRoot();\n        root.find('[data-region=\"footer\"]').html(`\n            <button type=\"button\" class=\"btn btn-outline-danger\" data-action=\"reset-all\">\n                ${M.util.get_string('resetall', 'theme_remui')}\n            </button>\n            <button type=\"button\" class=\"btn btn-danger\" data-action=\"reset-some\">\n                ${M.util.get_string('reset', 'theme_remui')}\n            </button>\n        `);\n        function reset(settings) {\n            $(SELECTOR.MAIN_OVERLAY).removeClass(\"d-none\");\n            modal.destroy();\n            PROMISES.SAVE_SETTINGS(settings, {\n                    reset: true\n                })\n                .done(() => {\n                    location.reload();\n                })\n                .fail(ex => {\n                    Notification.exception(ex);\n                });\n        }\n        root.on('click', '[data-action=\"reset-all\"]', () => {\n            reset([]);\n        });\n        root.on('click', '[data-action=\"reset-some\"]', () => {\n            reset(preserveResetSettings());\n        });\n    });\n}\n\n/**\n * Publish changes to server.\n */\nfunction publishChanges() {\n    console.log('Saving setting to site.');\n    $(SELECTOR.MAIN_OVERLAY).removeClass(\"d-none\");\n    let settings = $(SELECTOR.CONTROLS).serializeArray();\n    settings.forEach((element, index) => {\n        if ($(`[name=\"${element.name}\"]`).is(\".site-colorpicker\")) {\n            element.value = $(`[name=\"${element.name}\"]`)\n                .spectrum(\"get\")\n                .toString();\n            settings[index] = element;\n        }\n    });\n    PROMISES.SAVE_SETTINGS(settings)\n        .done(response => {\n            let obj = {};\n            if (response.status == false) {\n                obj.title = M.util.get_string(\"error\", \"theme_remui\");\n                obj.body = response.errors;\n            } else {\n                obj.title = M.util.get_string(\"success\", \"moodle\");\n                obj.body = response.message;\n                $(SELECTOR.CONTROLS).data(\"unsaved\", false);\n            }\n            console.log('Settings saved.');\n            location.reload();\n            // $(SELECTOR.SETTINGS_SAVE_MODAL).modal('show');\n            // $(SELECTOR.SETTINGS_SAVE_MODAL).find('[data-region=\"title\"]').text(obj.title);\n            // $(SELECTOR.SETTINGS_SAVE_MODAL).find('[data-region=\"body\"]').text(obj.body);\n            // $(SELECTOR.MAIN_OVERLAY).addClass(\"d-none\");\n        })\n        .fail(function(ex) {\n            console.log('Error:' + ex.message);\n            Notification.exception(ex);\n            $(SELECTOR.MAIN_OVERLAY).addClass(\"d-none\");\n        });\n}\n\n/**\n * Close customizer.\n * @param {DOMEvent} event Click event.\n * @returns {boolean}\n */\nfunction closeCustomizer(event) {\n    if ($(SELECTOR.CONTROLS).data(\"unsaved\") == false) {\n        return true;\n    }\n    event.preventDefault();\n    ModalFactory.create({\n            title: M.util.get_string(\"customizer-close-heading\", \"theme_remui\"),\n            body: M.util.get_string(\n                \"customizer-close-description\",\n                \"theme_remui\"\n            ),\n            type: ModalFactory.types.SAVE_CANCEL,\n        },\n        $(\"#create\")\n    ).done(modal => {\n        modal.show();\n        modal.setSaveButtonText(M.util.get_string(\"yes\", \"moodle\"));\n        var root = modal.getRoot();\n        root.on(ModalEvents.save,async  () => {\n            const feedbackcontext = await feedbackcollection.get_feedback_context(\"visualpersonalizer_question\");\n            if(JSON.parse(feedbackcontext)){\n                feedbackcollection.render_feedbackform(\"visualpersonalizer_question\",function(){\n\n                    // Attach click event to a specific button within the rendered form\n                    $(document).on(\"click\",\"#feedbackcollection-form .skip-btn\", function() {\n                        // feedbackcollection.close_modal();\n                        window.location = $(SELECTOR.CLOSE_CUSTOMIZER).attr(\"href\");\n                    });\n\n                    $(document).on(\"submit\", \"#feedbackcollection-form\", function(e) {\n                        e.preventDefault();\n                        // feedbackcollection.submit_feedback_handler(e);\n                        window.location = $(SELECTOR.CLOSE_CUSTOMIZER).attr(\"href\");\n                    });\n                });\n                console.log(\"inside feedback collection\");\n            }else{\n                window.location = $(SELECTOR.CLOSE_CUSTOMIZER).attr(\"href\");\n            }\n        });\n    });\n\n    // Setting DM status back to saved preference of user.\n    localStorage.setItem(CONSTANTS.NIGHTEYESTATE, localStorage.getItem(CONSTANTS.CURRNIGHTEYESTATE));\n    return true;\n}\n\n/**\n * Initialize events\n */\nfunction init() {\n    // Initialize customizer only once.\n    if (window[\"customizer-enabled\"] == true) {\n        return;\n    }\n    window[\"customizer-enabled\"] = true;\n\n    // Save current state of DM to another variable.\n    localStorage.setItem(CONSTANTS.CURRNIGHTEYESTATE, localStorage.getItem(CONSTANTS.NIGHTEYESTATE));\n    // Reset DM on personalizer.\n    localStorage.setItem(CONSTANTS.NIGHTEYESTATE, 2);\n\n    $(() => {\n        initHandlers();\n        resetHandlers();\n\n        // Lazy loading iframe.\n        $(SELECTOR.IFRAME).attr('src', $(SELECTOR.IFRAME).data('src'));\n\n        // Iframe on load event.\n        $(SELECTOR.IFRAME).get(0).addEventListener(\"load\", iframeHandler);\n\n        $(SELECTOR.SETTINGS_RESET).on(\"click\", resetAllSettingHandler);\n\n        // Open next panel.\n        $(SELECTOR.PANEL_LINK).on(\"click\", function() {\n            $(SELECTOR.PANEL + \"#\" + $(this).data(SELECTOR.PANEL_ID)).addClass(\n                SELECTOR.CURRENT\n            );\n            $(this).closest(SELECTOR.PANEL).removeClass(SELECTOR.CURRENT);\n        });\n\n        // Hide setting save modal.\n        $(SELECTOR.SETTINGS_SAVE_MODAL + ' [data-action=\"close\"]').on('click', function() {\n            $(SELECTOR.SETTINGS_SAVE_MODAL).modal('hide');\n        });\n        $('body').on('click', function(e) {\n            var container = $(SELECTOR.SETTINGS_SAVE_MODAL);\n            if (!container.is(e.target) && container.has(e.target).length === 0) {\n                container.modal('hide');\n            }\n        });\n\n\n        // Go back to previous panel.\n        $(SELECTOR.PANEL_BACK).on(\"click\", function() {\n            $(\n                SELECTOR.PANEL +\n                \":not(\" +\n                SELECTOR.PANEL +\n                \"#\" +\n                $(this).data(SELECTOR.PANEL_ID) +\n                \")\"\n            ).removeClass(SELECTOR.CURRENT);\n            $(SELECTOR.PANEL + \"#\" + $(this).data(SELECTOR.PANEL_ID)).addClass(\n                SELECTOR.CURRENT\n            );\n        });\n\n        // Toggle screen mode.\n        $(SELECTOR.MODE_TOGGLE).on(\"click\", function() {\n            $(SELECTOR.CUSTOMIZER)\n                .removeClass(\"mode-desktop mode-tablet mode-mobile\")\n                .addClass(`mode-${$(this).data(\"mode\")}`);\n        });\n\n        // Prevent submission.\n        $(SELECTOR.CONTROLS).on(\"submit\", function(event) {\n            event.preventDefault();\n            return false;\n        });\n\n        // Form change handler.\n        $(`\n            ${SELECTOR.CONTROLS} input[type=\"text\"],\n            ${SELECTOR.CONTROLS} input[type=\"number\"],\n            ${SELECTOR.CONTROLS} input[type=\"checkbox\"]\n            ${SELECTOR.CONTROLS} textarea,\n            ${SELECTOR.CONTROLS} select\n        `).on(\"change\", function() {\n            $(SELECTOR.CONTROLS).data(\"unsaved\", true);\n        });\n        $(`${SELECTOR.CONTROLS} input[type=\"color\"]`).on(\n            \"color.changed\",\n            function() {\n                $(SELECTOR.CONTROLS).data(\"unsaved\", true);\n            }\n        );\n\n        // Submit settings to database.\n        $(SELECTOR.PUBLISH).on(\"click\", publishChanges);\n\n        // Handle customizer close event.\n        $(SELECTOR.CLOSE_CUSTOMIZER).on(\"click\", closeCustomizer);\n\n        // Toggle customizer.\n        $(SELECTOR.CUSTMIZER_TOGGLE).on(\"click\", function() {\n            $(\"body\").toggleClass(\"full-customizer\");\n        });\n\n        // Toggle headings.\n        $(SELECTOR.HEADING_TOGGLE).on(\"click\", function() {\n            $(this).toggleClass(\"collapsed\");\n            $(this).next().slideToggle(\"fast\");\n        });\n\n        // Range slider observer.\n        $(\"body\").on(\"input\", SELECTOR.RANGEINPUT, function() {\n            let id = $(this).attr(\"id\");\n            let value = $(this).val();\n            $(`#${id}-range-value`).text(value);\n        });\n\n        // Turn On dark mode in personalizer\n        $(\".previewswitchon\").on(\"click\", function() {\n            // Set darkmode status to 1(Enable).\n            localStorage.setItem(CONSTANTS.NIGHTEYESTATE, 1);\n\n            // Reload Customizer iframe.\n            $(SELECTOR.IFRAME).attr('src', $(SELECTOR.IFRAME).data('src'));\n\n            $('#customizer').addClass(\"showdm\");\n            $(\".previewswitchon\").addClass('d-none');\n            $(\".previewswitchoff\").removeClass('d-none');\n            $(\".customizer-panels\").css(\"overflow-y\", \"hidden\");\n        });\n        $(\".previewswitchoff\").on(\"click\", function() {\n            // Set darkmode status to 2 (Disable).\n            localStorage.setItem(CONSTANTS.NIGHTEYESTATE, 2);\n\n            // Reload Customizer iframe.\n            $(SELECTOR.IFRAME).attr('src', $(SELECTOR.IFRAME).data('src'));\n            $('#customizer').removeClass(\"showdm\");\n            $(\".previewswitchoff\").addClass('d-none');\n            $(\".previewswitchon\").removeClass('d-none');\n            $(\".customizer-panels\").css(\"overflow-y\", \"auto\");\n        });\n    });\n}\n\nexport {\n    init\n};\n"],"names":["window","localStorage","setItem","CONSTANTS","getItem","handlers","forEach","handler","init","document","trigger","SELECTOR","on","color","this","data","closest","find","spectrum","value","prop","val","textarea","attr","html","get","addEventListener","iframeHandler","resetAllSettingHandler","addClass","removeClass","modal","e","container","is","target","has","length","event","preventDefault","publishChanges","closeCustomizer","toggleClass","next","slideToggle","id","text","css","PROMISES","settings","options","undefined","Ajax","call","methodname","args","JSON","stringify","globalSite","globalBody","globalColors","globalHeading","globalButtons","headerLogo","headerSiteDesign","footer","additionalSettings","iconsettings","quickSetup","login","contentDocument","Utils","getDocument","contentWindow","getWindow","history","replaceState","title","M","cfg","wwwroot","encodeURI","location","href","apply","hideLoader","setTimeout","onbeforeunload","console","log","showLoader","body","util","get_string","create","type","ModalFactory","types","SAVE_CANCEL","done","show","root","getRoot","reset","destroy","reload","fail","ex","exception","element","ids","i","push","name","preserveResetSettings","serializeArray","index","toString","response","obj","status","errors","message","setSaveButtonText","ModalEvents","save","async","feedbackcontext","feedbackcollection","get_feedback_context","parse","render_feedbackform"],"mappings":"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"}