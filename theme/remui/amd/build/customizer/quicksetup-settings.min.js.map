{"version":3,"file":"quicksetup-settings.min.js","sources":["../../src/customizer/quicksetup-settings.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n/**\n * Theme customizer Quick setup\n *\n * @copyright (c) 2023 WisdmLabs (https://wisdmlabs.com/) <support@wisdmlabs.com>\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @author    Yogesh Shirsath\n */\n\nimport $ from 'jquery';\n\n/**\n * MAIN settings list.\n */\nvar MAIN = {\n    PRIMARY: '[name=\"sitecolorhex\"]',\n    SECONDARY: '[name=\"secondarycolor\"]',\n    TEXT: '[name=\"themecolors-textcolor\"]',\n    BORDER: '[name=\"themecolors-bordercolor\"]'\n};\n\n/**\n * Secondary colors list.\n */\nvar SECONDARY = [\n    {key: 'bg', target: '[name=\"global-colors-pagebackgroundcolor\"]'},\n    {key: 'ascentbg', target: '[name=\"global-colors-ascentbackgroundcolor\"]'},\n    {key: 'elementbg', target: '[name=\"global-colors-elementbackgroundcolor\"]'},\n\n    // Border color.\n    {key: 'lightborder', target: '[name=\"themecolors-lightbordercolor\"]'},\n    {key: 'mediumborder', target: '[name=\"themecolors-mediumbordercolor\"]'},\n\n    // Link colors.\n    {key: 'link', target: '[name=\"global-typography-body-linkcolor\"]'},\n    {key: 'linkhover', target: '[name=\"global-typography-body-linkhovercolor\"]'},\n\n    // Heading colors.\n    {key: 'headingstext', target: '[name=\"typography-heading-all-textcolor\"]'},\n    {key: 'headingstext', target: '[name=\"typography-heading-h1-textcolor\"]'},\n    {key: 'headingstext', target: '[name=\"typography-heading-h2-textcolor\"]'},\n    {key: 'headingstext', target: '[name=\"typography-heading-h3-textcolor\"]'},\n    {key: 'headingstext', target: '[name=\"typography-heading-h4-textcolor\"]'},\n    {key: 'headingstext', target: '[name=\"typography-heading-h5-textcolor\"]'},\n    {key: 'headingstext', target: '[name=\"typography-heading-h6-textcolor\"]'},\n\n    // Primary button colors.\n    {key: 'primarybuttonbg', target: '[name=\"button-primary-color-background\"]'},\n    {key: 'primarybuttonbghover', target: '[name=\"button-primary-color-background-hover\"]'},\n    {key: 'primarybuttonborder', target: '[name=\"button-primary-border-color\"]'},\n    {key: 'primarybuttonborderhover', target: '[name=\"button-primary-border-color-hover\"]'},\n    {key: 'primarybuttontext', target: '[name=\"button-primary-color-text\"]'},\n    {key: 'primarybuttontext', target: '[name=\"button-primary-color-text-hover\"]'},\n    {key: 'primarybuttonicon', target: '[name=\"button-primary-color-icon\"]'},\n    {key: 'primarybuttonicon', target: '[name=\"button-primary-color-icon-hover\"]'},\n\n    // Secondary button colors.\n    {key: 'secondarybuttontext', target: '[name=\"button-secondary-color-text\"]'},\n    {key: 'secondarybuttontexthover', target: '[name=\"button-secondary-color-text-hover\"]'},\n    {key: 'secondarybuttonborder', target: '[name=\"button-secondary-border-color\"]'},\n    {key: 'secondarybuttonborderhover', target: '[name=\"button-secondary-border-color-hover\"]'},\n    {key: 'secondarybuttonicon', target: '[name=\"button-secondary-color-icon\"]'},\n    {key: 'secondarybuttoniconhover', target: '[name=\"button-secondary-color-icon-hover\"]'},\n    {key: 'secondarybuttonbg', target: '[name=\"button-secondary-color-background\"]'},\n    {key: 'secondarybuttonbg', target: '[name=\"button-secondary-color-background-hover\"]'},\n\n    // Header colors.\n    {key: 'headerbg', target: '[name=\"logo-bg-color\"]'},\n    {key: 'headertext', target: '[name=\"sitenamecolor\"]'},\n    {key: 'headerbg', target: '[name=\"header-menu-background-color\"]'},\n    {key: 'headertext', target: '[name=\"header-menu-text-color\"]'},\n    {key: 'headertexthover', target: '[name=\"header-menu-text-hover-color\"]'},\n    {key: 'headertextactive', target: '[name=\"header-menu-text-active-color\"]'},\n    {key: 'headerelementbg', target: '[name=\"header-menu-element-bg-color\"]'},\n    {key: 'headerdividercolordark', target: '[name=\"header-menu-divider-bg-color\"]'},\n    {key: 'headericons', target: '[name=\"hds-icon-color\"]'},\n    {key: 'headericonshover', target: '[name=\"hds-icon-hover-color\"]'},\n    {key: 'headericonsactive', target: '[name=\"hds-icon-active-color\"]'},\n\n    // Footer colors.\n    {key: 'footerbg', target: '[name=\"footer-background-color\"]'},\n    {key: 'footertext', target: '[name=\"footer-text-color\"]'},\n    {key: 'footertext', target: '[name=\"footer-columntitle-color\"]'},\n    {key: 'footerlinktext', target: '[name=\"footer-link-text\"]'},\n    {key: 'footerlinktext', target: '[name=\"footer-link-hover-text\"]'},\n    {key: 'footerdivider', target: '[name=\"footer-divider-color\"]'},\n    {key: 'footericons', target: '[name=\"footer-icon-color\"]'},\n    {key: 'footericonshover', target: '[name=\"footer-icon-hover-color\"]'},\n];\n\n/**\n * Selectors list.\n */\nvar SELECTOR = {\n    BASE: 'quicksetup',\n    PALLETAPPLY: '[name=\"pallet-apply\"]',\n    FONTSELECTOR: '.font-selector',\n    FONTAPPLY: '[name=\"font-apply\"]',\n    FONTSETTING: '[name=\"global-typography-body-fontfamily\"]',\n    PALLET: '[name=\"radio_colorpallet\"]',\n    CURRENTPALLET: '.current-pallete',\n    CURRENTFONT: '.current-font',\n    NAVBARINVERSE: '[name=\"navbarinverse\"]',\n    FONTVIEWER: '.current-pallete.font-pallet'\n};\n\n/**\n * Apply settings.\n */\nfunction apply() {\n    // Dummy method.\n    // This method has settings which will be applied to related settings.\n    // So we don't need to apply it on every iframe refresh or link change.\n}\n\nfunction applyColors(colors) {\n    $(MAIN.PRIMARY).spectrum('set', colors.primary).trigger('color.changed');\n    $(MAIN.SECONDARY).spectrum('set', colors.secondary).trigger('color.changed');\n    $(MAIN.TEXT).spectrum('set', colors.text).trigger('color.changed');\n    $(MAIN.BORDER).spectrum('set', colors.border).trigger('color.changed');\n    SECONDARY.forEach(setting => {\n        $(setting.target).spectrum('set', colors[setting.key]).trigger('color.changed');\n    });\n}\n\n/**\n * Sync color on load.\n */\nfunction syncColor() {\n    $($(SELECTOR.CURRENTPALLET).find('span').get(0)).css(\n        'background',\n        $(MAIN.PRIMARY).spectrum('get').toString()\n    );\n    $($(SELECTOR.CURRENTPALLET).find('span').get(1)).css(\n        'background',\n        $(MAIN.SECONDARY).spectrum('get').toString()\n    );\n    $($(SELECTOR.CURRENTPALLET).find('span').get(2)).css(\n        'background',\n        $(MAIN.TEXT).spectrum('get').toString()\n    );\n    $($(SELECTOR.CURRENTPALLET).find('span').get(3)).css(\n        'background',\n        $(MAIN.BORDER).spectrum('get').toString()\n    );\n}\n\n/**\n * Sync font selected with current font item.\n */\nfunction syncFont() {\n    let font = $(SELECTOR.FONTSETTING).val();\n    if (font.toLowerCase() == 'standard') {\n        font = 'Inter';\n    }\n    // let url = \"https://staging.edwiser.org/remuifonts/images/\";\n    // $(SELECTOR.CURRENTFONT).find('img').attr('src', url + font + '.png');\n\n    $(SELECTOR.FONTVIEWER).find('.font-sample .font-name').text(font);\n    $(SELECTOR.FONTVIEWER).find('.font-sample').css('font-family', font);\n}\n\n/**\n * Load font on quick setup when page is loaded.\n */\nfunction onLoadFont() {\n    // First time font sync.\n    let font = $(SELECTOR.FONTSETTING).val();\n    if (font.toLowerCase() == 'standard') {\n        font = 'Inter';\n    }\n    $('select' + SELECTOR.FONTSELECTOR).val(font).trigger('change');\n    $(SELECTOR.FONTAPPLY).attr('disabled', false);\n    loadDemoFont(font);\n}\n\n/**\n * Initialize events.\n */\nfunction init() {\n    syncColor();\n    syncFont();\n    onLoadFont();\n    $(SELECTOR.PALLET).on('change', function() {\n        $(SELECTOR.PALLET).each((index, input) => {\n            if (input.checked) {\n                $(SELECTOR.PALLETAPPLY).attr('disabled', false);\n            }\n        });\n    });\n    $(SELECTOR.PALLETAPPLY).on('click', function() {\n        $(this).attr('disabled', true);\n        $(SELECTOR.PALLET).each((index, input) => {\n            if (input.checked) {\n                $(input).prop('checked', false).trigger('change');\n                applyColors($(input).data('colors'));\n            }\n        });\n    });\n\n    // Handling current pallet colors.\n    $(MAIN.PRIMARY).on('color.changed', function() {\n        $($(SELECTOR.CURRENTPALLET).find('span').get(0)).css('background', $(this).spectrum('get').toString());\n    });\n    $(MAIN.SECONDARY).on('color.changed', function() {\n        $($(SELECTOR.CURRENTPALLET).find('span').get(1)).css('background', $(this).spectrum('get').toString());\n    });\n    $(MAIN.TEXT).on('color.changed', function() {\n        $($(SELECTOR.CURRENTPALLET).find('span').get(2)).css('background', $(this).spectrum('get').toString());\n    });\n    $(MAIN.BORDER).on('color.changed', function() {\n        $($(SELECTOR.CURRENTPALLET).find('span').get(3)).css('background', $(this).spectrum('get').toString());\n    });\n\n    // Observ font settings change.\n    $(SELECTOR.FONTSETTING).on('change', syncFont);\n\n    // Observer font.\n    $(SELECTOR.FONTSELECTOR).on('change', function() {\n        $(SELECTOR.FONTAPPLY).attr('disabled', false);\n    });\n\n    // Apply font.\n    $(SELECTOR.FONTAPPLY).on('click', function() {\n        var selectedfont = $(SELECTOR.FONTSELECTOR).selectpicker('val') + '';\n        $(SELECTOR.FONTSETTING).val(selectedfont).trigger('input').trigger('change');\n        loadDemoFont(selectedfont);\n        // $(SELECTOR.FONTVIEWER).find('.option-label').css('font-family', selectedfont);\n        // $(SELECTOR.FONTVIEWER).find('.sample-text').css('font-family', selectedfont);\n        syncFont();\n        let inheritFont = [\n            '[name=\"global-typography-smallpara-fontfamily\"]',\n            '[name=\"global-typography-smallinfo-fontfamily\"]',\n            '[name=\"button-common-fontfamily\"]',\n            '[name=\"hds-menu-font-family\"]',\n            '[name=\"footerfontfamily\"]',\n            '[name=\"footer-columntitle-fontfamily\"]'\n        ];\n        ['all', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6']\n        .forEach(heading => {\n            inheritFont.push('[name=\"typography-heading-' + heading + '-fontfamily\"]');\n        });\n        inheritFont.forEach(id => {\n            if ($(id).find('option[value=\"Inherit\"]').length) {\n                $(id).val(\"Inherit\").trigger('input').trigger('change');\n            } else if ($(id).find('option[value=\"inherit\"]').length) {\n                $(id).val(\"inherit\").trigger('input').trigger('change');\n            }\n        });\n        $(this).attr('disabled', true);\n    });\n}\n\n/**\n * Load font on iframe.\n * @param {string} fontName Font name\n */\nfunction loadDemoFont(fontName) {\n    let id = fontName.replace(' ', '');\n    id += '_js';\n    if ($('body').find('#' + id).length != 0) {\n        return;\n    }\n    let js = document.createElement('script');\n    js.type = 'text/javascript';\n    js.id = id;\n    js.textContent = `require(['theme_remui/webfont'], function(webFont) {\n        webFont.load({\n            google: {\n                families: ['${fontName}:100,200,300,400,500,600,700,800,900']\n            }\n        });\n    });`;\n    $('body').append(js);\n}\n\nexport default {\n    init,\n    apply\n};\n"],"names":["MAIN","SECONDARY","key","target","SELECTOR","syncFont","font","val","toLowerCase","find","text","css","loadDemoFont","fontName","id","replace","length","js","document","createElement","type","textContent","append","init","get","spectrum","toString","trigger","attr","onLoadFont","on","each","index","input","checked","this","colors","prop","data","primary","secondary","border","forEach","setting","selectedfont","selectpicker","inheritFont","heading","push","apply"],"mappings":"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"}