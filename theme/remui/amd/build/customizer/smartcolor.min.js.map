{"version":3,"file":"smartcolor.min.js","sources":["../../src/customizer/smartcolor.js"],"sourcesContent":["/* eslint-disable no-console */\n// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n/**\n * Theme customizer color utils js. Provide functionality to manupulate colors.\n *\n * @copyright (c) 2023 WisdmLabs (https://wisdmlabs.com/) <support@wisdmlabs.com>\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @author    Yogesh Shirsath\n */\n\nimport $ from \"jquery\";\nimport ColorUtils from \"theme_remui/customizer/color-utils\";\nimport ModalFactory from \"core/modal_factory\";\n\n// Main colors selectors.\nvar MAIN_COLORS = {\n    PRIMARY: '[name=\"sitecolorhex\"]',\n    SECONDARY: '[name=\"secondarycolor\"]',\n    TEXT: '[name=\"themecolors-textcolor\"]',\n    BORDER: '[name=\"themecolors-bordercolor\"]'\n};\n\n/**\n * Get main colors object.\n * @returns {object} Colors\n */\nfunction getMainColors() {\n    return {\n        primary: $(MAIN_COLORS.PRIMARY).spectrum('get').toString(),\n        secondary: $(MAIN_COLORS.SECONDARY).spectrum('get').toString(),\n        text: $(MAIN_COLORS.TEXT).spectrum('get').toString(),\n        border: $(MAIN_COLORS.BORDER).spectrum('get').toString(),\n        white: '#ffffff'\n    };\n}\n\nfunction apply() {\n    let mainColors = getMainColors();\n    // Header Element bg.\n    let colorMap = [{\n        target: 'global-colors-pagebackgroundcolor',\n        source: 'primary',\n        shift: {\n            method: 'tint',\n            value: 96\n        }\n    }, {\n        target: 'global-typography-body-linkcolor',\n        source: 'primary',\n    }, {\n        target: 'global-typography-body-linkhovercolor',\n        source: 'primary',\n        shift: {\n            method: 'shade',\n            value: 20\n        }\n    }, {\n        target: 'button-primary-color-background', // Primary colors\n        source: 'primary',\n    }, {\n        target: 'button-primary-color-background-hover',\n        source: 'primary',\n        shift: {\n            method: 'shade',\n            value: 20\n        }\n    }, {\n        target: 'button-primary-color-text',\n        source: 'white',\n    }, {\n        target: 'button-primary-color-text-hover',\n        source: 'white',\n    }, {\n        target: 'button-primary-color-icon',\n        source: 'white',\n    }, {\n        target: 'button-primary-color-icon-hover',\n        source: 'white',\n    }, {\n        target: 'button-primary-border-color',\n        source: 'primary'\n    }, {\n        target: 'button-primary-border-color-hover',\n        source: 'primary',\n        shift: {\n            method: 'shade',\n            value: 20\n        }\n    }, {\n        target: 'button-secondary-color-text', // Secondary colors\n        source: 'primary',\n    }, {\n        target: 'button-secondary-color-text-hover',\n        source: 'primary',\n        shift: {\n            method: 'shade',\n            value: 20\n        }\n    }, {\n        target: 'button-secondary-color-icon',\n        source: 'primary',\n    }, {\n        target: 'button-secondary-color-icon-hover',\n        source: 'primary',\n        shift: {\n            method: 'shade',\n            value: 20\n        }\n    }, {\n        target: 'button-secondary-color-background',\n        source: 'white',\n    }, {\n        target: 'button-secondary-color-background-hover',\n        source: 'white',\n    }, {\n        target: 'button-secondary-border-color',\n        source: 'primary',\n    }, {\n        target: 'button-secondary-border-color-hover',\n        source: 'primary',\n        shift: {\n            method: 'shade',\n            value: 20\n        }\n    }, {\n        target: 'loginpaneltextcolor',\n        source: 'text',\n        shift: {\n            method: 'shade',\n            value: 38\n        }\n    }, {\n        target: 'loginpanelcontentcolor',\n        source: 'text',\n    }, {\n        target: 'signuptextcolor',\n        source: 'text',\n    }, {\n        target: 'loginpanellinkcolor',\n        source: 'primary',\n    }, {\n        target: 'loginpanellinkhovercolor',\n        source: 'primary',\n        shift: {\n            method: 'shade',\n            value: 20\n        }\n    }, {\n        target: 'loginpanelbackgroundcolor',\n        source: 'primary',\n        shift: {\n            method: 'tint',\n            value: 96\n        }\n    }, {\n        target: 'global-colors-ascentbackgroundcolor', // Ascent bg color.\n        source: 'primary',\n        shift: {\n            method: 'shade',\n            value: 60\n        }\n    },\n    {\n        target: 'global-colors-elementbackgroundcolor', // Elements  bg color.\n        source: 'border',\n        shift: {\n            method: 'tint',\n            value: 58\n        }\n    }, {\n        target: [\n            'header-menu-background-color', // Header background.\n            'logo-bg-color'\n        ],\n        source: 'white'\n    }, {\n        target: [\n            'header-menu-text-color', // Header menu item color.\n            'sitenamecolor'\n        ],\n        source:  'text',\n        shift: {\n            method: 'tint',\n            value: 12\n        }\n    }, {\n        target: 'header-menu-text-hover-color', // Header menu item hover color.\n        source: 'primary'\n    }, {\n        target: 'header-menu-text-active-color', // Header menu item active color.\n        source: 'primary'\n    }, {\n        target: 'header-menu-element-bg-color', // Header Element BG.\n        source: 'primary',\n        shift: {\n            method: 'tint',\n            value: 94\n        }\n    }, {\n        target: 'header-menu-divider-bg-color', // Header divider color.\n        source: 'border',\n        shift: {\n            method: 'shade',\n            value: 15\n        }\n    }, {\n        target: 'hds-icon-color', // Header icon color.\n        source: 'text',\n        shift: {\n            method: 'tint',\n            value: 9\n        }\n    }, {\n        target: 'hds-icon-hover-color', // Header icon hover color.\n        source: 'text',\n        shift: {\n            method: 'shade',\n            value: 11\n        }\n    }, {\n        target: 'hds-icon-active-color', // Header icon active color.\n        source: 'primary'\n    }, {\n        target: 'themecolors-lightbordercolor', // Light border color.\n        source: 'border',\n        shift: {\n            method: 'tint',\n            value: 58\n        }\n    }, {\n        target: 'themecolors-mediumbordercolor', // Medium border color.\n        source: 'border',\n    }, {\n        target: [\n            'typography-heading-all-textcolor', // Headings.\n            'typography-heading-h1-textcolor',\n            'typography-heading-h2-textcolor',\n            'typography-heading-h3-textcolor',\n            'typography-heading-h4-textcolor',\n            'typography-heading-h5-textcolor',\n            'typography-heading-h6-textcolor'\n        ],\n        source: 'text',\n        shift: {\n            method: 'shade',\n            value: 38\n        }\n    }, {\n        target: 'footer-background-color', // Footer BG.\n        source: 'primary',\n        shift: {\n            method: 'shade',\n            value: 90\n        }\n    }, {\n        target: 'footer-text-color',\n        source: 'white'\n    }, {\n        target: [\n            'footer-link-text', // Footer link text.\n            'footer-link-hover-text',\n        ],\n        source: 'text',\n        shift: {\n            method: 'tint',\n            value: 70\n        }\n    }, {\n        target: 'footer-divider-color', // Footer divider.\n        source: 'primary',\n        shift: {\n            method: 'shade',\n            value: 70\n        }\n    }, {\n        target: [\n            'footer-icon-color', // Footer icon color\n        ],\n        source: 'text',\n        shift: {\n            method: 'tint',\n            value: 40\n        },\n    }, {\n        target: [\n            'footer-icon-hover-color', // Footer icon hover color\n        ],\n        source: 'primary'\n    }];\n\n    // Iterate each map to apply color.\n    colorMap.forEach(color => {\n        let targets = color.target;\n        if (!Array.isArray(color.target)) {\n            targets = [targets];\n        }\n\n        targets.forEach(target => {\n            if (color.shift === undefined) {\n                $(`[name=\"${target}\"]`).spectrum('set', mainColors[color.source]).trigger('color.changed');\n                return;\n            }\n            $(`[name=\"${target}\"]`).spectrum(\n                'set',\n                ColorUtils[color.shift.method](\n                    mainColors[color.source],\n                    color.shift.value\n                )\n            ).trigger('color.changed');\n        });\n    });\n\n    let obj = {\n        type: ModalFactory.types.ALERT,\n    };\n    obj.title = M.util.get_string(\"success\", \"moodle\");\n    obj.body = \"Smart color applied successfully\";\n    ModalFactory.create(obj, $(\"#create\")).done(modal => {\n        modal.show();\n    });\n}\n\nexport default {\n    apply\n};\n"],"names":["MAIN_COLORS","apply","mainColors","primary","spectrum","toString","secondary","text","border","white","target","source","shift","method","value","forEach","color","targets","Array","isArray","undefined","ColorUtils","trigger","obj","type","ModalFactory","types","ALERT","title","M","util","get_string","body","create","done","modal","show"],"mappings":";;;;;;;uOA4BIA,oBACS,wBADTA,sBAEW,0BAFXA,iBAGM,iCAHNA,mBAIQ,gDA+SG,CACXC,qBA9RIC,WAVG,CACHC,SAAS,mBAAEH,qBAAqBI,SAAS,OAAOC,WAChDC,WAAW,mBAAEN,uBAAuBI,SAAS,OAAOC,WACpDE,MAAM,mBAAEP,kBAAkBI,SAAS,OAAOC,WAC1CG,QAAQ,mBAAER,oBAAoBI,SAAS,OAAOC,WAC9CI,MAAO,WAOI,CAAC,CACZC,OAAQ,oCACRC,OAAQ,UACRC,MAAO,CACHC,OAAQ,OACRC,MAAO,KAEZ,CACCJ,OAAQ,mCACRC,OAAQ,WACT,CACCD,OAAQ,wCACRC,OAAQ,UACRC,MAAO,CACHC,OAAQ,QACRC,MAAO,KAEZ,CACCJ,OAAQ,kCACRC,OAAQ,WACT,CACCD,OAAQ,wCACRC,OAAQ,UACRC,MAAO,CACHC,OAAQ,QACRC,MAAO,KAEZ,CACCJ,OAAQ,4BACRC,OAAQ,SACT,CACCD,OAAQ,kCACRC,OAAQ,SACT,CACCD,OAAQ,4BACRC,OAAQ,SACT,CACCD,OAAQ,kCACRC,OAAQ,SACT,CACCD,OAAQ,8BACRC,OAAQ,WACT,CACCD,OAAQ,oCACRC,OAAQ,UACRC,MAAO,CACHC,OAAQ,QACRC,MAAO,KAEZ,CACCJ,OAAQ,8BACRC,OAAQ,WACT,CACCD,OAAQ,oCACRC,OAAQ,UACRC,MAAO,CACHC,OAAQ,QACRC,MAAO,KAEZ,CACCJ,OAAQ,8BACRC,OAAQ,WACT,CACCD,OAAQ,oCACRC,OAAQ,UACRC,MAAO,CACHC,OAAQ,QACRC,MAAO,KAEZ,CACCJ,OAAQ,oCACRC,OAAQ,SACT,CACCD,OAAQ,0CACRC,OAAQ,SACT,CACCD,OAAQ,gCACRC,OAAQ,WACT,CACCD,OAAQ,sCACRC,OAAQ,UACRC,MAAO,CACHC,OAAQ,QACRC,MAAO,KAEZ,CACCJ,OAAQ,sBACRC,OAAQ,OACRC,MAAO,CACHC,OAAQ,QACRC,MAAO,KAEZ,CACCJ,OAAQ,yBACRC,OAAQ,QACT,CACCD,OAAQ,kBACRC,OAAQ,QACT,CACCD,OAAQ,sBACRC,OAAQ,WACT,CACCD,OAAQ,2BACRC,OAAQ,UACRC,MAAO,CACHC,OAAQ,QACRC,MAAO,KAEZ,CACCJ,OAAQ,4BACRC,OAAQ,UACRC,MAAO,CACHC,OAAQ,OACRC,MAAO,KAEZ,CACCJ,OAAQ,sCACRC,OAAQ,UACRC,MAAO,CACHC,OAAQ,QACRC,MAAO,KAGf,CACIJ,OAAQ,uCACRC,OAAQ,SACRC,MAAO,CACHC,OAAQ,OACRC,MAAO,KAEZ,CACCJ,OAAQ,CACJ,+BACA,iBAEJC,OAAQ,SACT,CACCD,OAAQ,CACJ,yBACA,iBAEJC,OAAS,OACTC,MAAO,CACHC,OAAQ,OACRC,MAAO,KAEZ,CACCJ,OAAQ,+BACRC,OAAQ,WACT,CACCD,OAAQ,gCACRC,OAAQ,WACT,CACCD,OAAQ,+BACRC,OAAQ,UACRC,MAAO,CACHC,OAAQ,OACRC,MAAO,KAEZ,CACCJ,OAAQ,+BACRC,OAAQ,SACRC,MAAO,CACHC,OAAQ,QACRC,MAAO,KAEZ,CACCJ,OAAQ,iBACRC,OAAQ,OACRC,MAAO,CACHC,OAAQ,OACRC,MAAO,IAEZ,CACCJ,OAAQ,uBACRC,OAAQ,OACRC,MAAO,CACHC,OAAQ,QACRC,MAAO,KAEZ,CACCJ,OAAQ,wBACRC,OAAQ,WACT,CACCD,OAAQ,+BACRC,OAAQ,SACRC,MAAO,CACHC,OAAQ,OACRC,MAAO,KAEZ,CACCJ,OAAQ,gCACRC,OAAQ,UACT,CACCD,OAAQ,CACJ,mCACA,kCACA,kCACA,kCACA,kCACA,kCACA,mCAEJC,OAAQ,OACRC,MAAO,CACHC,OAAQ,QACRC,MAAO,KAEZ,CACCJ,OAAQ,0BACRC,OAAQ,UACRC,MAAO,CACHC,OAAQ,QACRC,MAAO,KAEZ,CACCJ,OAAQ,oBACRC,OAAQ,SACT,CACCD,OAAQ,CACJ,mBACA,0BAEJC,OAAQ,OACRC,MAAO,CACHC,OAAQ,OACRC,MAAO,KAEZ,CACCJ,OAAQ,uBACRC,OAAQ,UACRC,MAAO,CACHC,OAAQ,QACRC,MAAO,KAEZ,CACCJ,OAAQ,CACJ,qBAEJC,OAAQ,OACRC,MAAO,CACHC,OAAQ,OACRC,MAAO,KAEZ,CACCJ,OAAQ,CACJ,2BAEJC,OAAQ,YAIHI,SAAQC,YACTC,QAAUD,MAAMN,OACfQ,MAAMC,QAAQH,MAAMN,UACrBO,QAAU,CAACA,UAGfA,QAAQF,SAAQL,cACQU,IAAhBJ,MAAMJ,2CAIEF,cAAYN,SACpB,MACAiB,oBAAWL,MAAMJ,MAAMC,QACnBX,WAAWc,MAAML,QACjBK,MAAMJ,MAAME,QAElBQ,QAAQ,sDATMZ,cAAYN,SAAS,MAAOF,WAAWc,MAAML,SAASW,QAAQ,2BAalFC,IAAM,CACNC,KAAMC,uBAAaC,MAAMC,OAE7BJ,IAAIK,MAAQC,EAAEC,KAAKC,WAAW,UAAW,UACzCR,IAAIS,KAAO,0DACEC,OAAOV,KAAK,mBAAE,YAAYW,MAAKC,QACxCA,MAAMC"}