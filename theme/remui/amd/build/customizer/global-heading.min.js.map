{"version":3,"file":"global-heading.min.js","sources":["../../src/customizer/global-heading.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\n// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n/**\n * Theme customizer global-heading js\n * @copyright (c) 2023 WisdmLabs (https://wisdmlabs.com/) <support@wisdmlabs.com>\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @author    Yogesh Shirsath\n */\n\nimport $ from 'jquery';\nimport Utils from 'theme_remui/customizer/utils';\n\n/**\n * Headings list\n */\nvar headings = ['all', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'];\n\n/**\n * Selectors\n */\nvar SELECTOR = {\n    HEADING: 'typography-heading',\n    HEADINGADVSETTINGS: '[name=heading-adv-setting]',\n    WEIGHTEREGULAR: '[name=heading-regular-fontweight]',\n    WEIGHTESEMIBOLD: '[name=heading-semibold-fontweight]',\n    WEIGHTEBOLD: '[name=heading-bold-fontweight]',\n    WEIGHTEEXBOLD: '[name=heading-exbold-fontweight]',\n    WEIGHTDIVIDER: '.heading-weight-divider',\n    SETTINGITEM: \".setting-item\",\n    DNONE: \"d-none\",\n\n};\n\nlet iframeDocument = Utils.getDocument();\n\n// Add heading in selector.\nheadings.forEach(function(heading) {\n    SELECTOR['FONTFAMILY' + heading] = `[name=\"typography-heading-${heading}-fontfamily\"]`;\n    SELECTOR['FONTSIZE' + heading] = `typography-heading-${heading}-fontsize`;\n    // SELECTOR['FONTWEIGHT' + heading] = `[name=\"typography-heading-${heading}-fontweight\"]`;\n    SELECTOR['TEXTTRANSFORM' + heading] = `[name=\"typography-heading-${heading}-text-transform\"]`;\n    SELECTOR['LINEHEIGHT' + heading] = `[name=\"typography-heading-${heading}-lineheight\"]`;\n    SELECTOR['CUSTOMCOLOR' + heading] = `[name=\"typography-heading-${heading}-custom-color\"]`;\n    SELECTOR['TEXTCOLOR' + heading] = `[name=\"typography-heading-${heading}-textcolor\"]`;\n});\n\n/**\n * Get site heading content.\n * @param {string} heading Heading tag\n * @return {string} site color content\n */\nfunction getContent(heading) {\n    let fontSize;\n    let fontFamily = $(SELECTOR['FONTFAMILY' + heading]).val();\n    if (fontFamily.toLowerCase() == 'inherit') {\n        fontFamily = $(SELECTOR.FONTFAMILYall).val();\n    }\n\n    let tags = [heading, '.' + heading];\n\n    let num = heading.replace('h', '');\n    ['regular', 'semibold', 'bold', 'exbold']\n    .forEach(type => {\n        tags.push(`.h-${type}-${num}`);\n    });\n\n    let tag = tags.join(', ');\n    let content = '';\n\n    let advsettings = $(SELECTOR.HEADINGADVSETTINGS);\n    let weightregular = $(SELECTOR.WEIGHTEREGULAR).val();\n    let weightsemibold = $(SELECTOR.WEIGHTESEMIBOLD).val();\n    let weightbold = $(SELECTOR.WEIGHTEBOLD).val();\n    let weightexbold = $(SELECTOR.WEIGHTEEXBOLD).val();\n\n    if (fontFamily.toLowerCase() != 'inherit') {\n        Utils.loadFont(fontFamily);\n    }\n\n    content += `\\n\n        ${tag} {\n    `;\n\n    if (fontFamily.toLowerCase() != 'inherit') {\n        content += `\\nfont-family: \"${fontFamily}\",sans-serif !important;`;\n    }\n\n    fontSize = $(`[name=\"${SELECTOR['FONTSIZE' + heading]}\"]`).val();\n    content += `\\nfont-size: ${fontSize}rem;`;\n\n    // let fontWeight = $(SELECTOR['FONTWEIGHT' + heading]).val();\n    // if (fontWeight.toLowerCase() != 'inherit') {\n    //     content += `\\nfont-weight: ${fontWeight};`;\n    // }\n\n    let textTransform = $(SELECTOR['TEXTTRANSFORM' + heading]).val();\n    if (textTransform.toLowerCase() == 'inherit') {\n        textTransform = $(SELECTOR.TEXTTRANSFORMall).val();\n    }\n    if (textTransform.toLowerCase() != 'inherit') {\n        content += `\\ntext-transform: ${textTransform};`;\n    }\n\n    let lineHeight = $(SELECTOR['LINEHEIGHT' + heading]).val();\n    if (lineHeight != '') {\n        content += `\\nline-height: ${lineHeight};`;\n    }\n\n    let customcolor = $(SELECTOR['CUSTOMCOLOR' + heading]).is(':checked');\n    if (customcolor == true) {\n        $(SELECTOR['TEXTCOLOR' + heading]).closest('.setting-item').slideDown(100);\n    } else {\n        $(SELECTOR['TEXTCOLOR' + heading]).closest('.setting-item').slideUp(100);\n    }\n\n    let textColor = $(SELECTOR.TEXTCOLORall).val();\n    if (customcolor == true) {\n        textColor = $(SELECTOR['TEXTCOLOR' + heading]).val();\n    }\n\n    content += `\\ncolor: ${textColor} !important;\n    }`;\n    content += `#page-admin-roles-permissions table.rolecap thead,\n                #page-admin-roles-check .rolecap thead,\n                .rolecap .cap-desc a,\n                .rolecap  .allowedroles span,.userselector #reportuser optgroup,\n                #userselector_options_sizer #userselector_options_caption a,\n                .edw-card-design-hd .categoryname{\n        color: ${textColor} !important\n    }`;\n    // course page header content\n\n    content += `.header-heading.coursepage.design-1,\n    .instructor-info.stat-container .h-semibold-6{\n        color: white !important\n    }`;\n\n    if (advsettings.is(':checked')) {\n        content += `.h-regular-1,.h-regular-2,.h-regular-3,.h-regular-4,.h-regular-5,.h-regular-6{\n            font-weight: ${weightregular} !important;\n        }\n        .h-semibold-1,.h-semibold-2,.h-semibold-3,.h-semibold-4,.h-semibold-5,.h-semibold-6{\n            font-weight: ${weightsemibold} !important;\n        }\n        .h-bold-1,.h-bold-2,.h-bold-3,.h-bold-4,.h-bold-5,.h-bold-6{\n            font-weight: ${weightbold} !important;\n        }\n        .h-exbold-1,.h-exbold-2,.h-exbold-3,.h-exbold-4,.h-exbold-5,.h-exbold-6{\n            font-weight: ${weightexbold} !important;\n        }\n        `;\n    }else{\n        content += `.h-regular-1,.h-regular-2,.h-regular-3,.h-regular-4,.h-regular-5,.h-regular-6{\n            font-weight: 400 !important;\n        }\n        .h-semibold-1,.h-semibold-2,.h-semibold-3,.h-semibold-4,.h-semibold-5,.h-semibold-6{\n            font-weight: 600 !important;\n        }\n        .h-bold-1,.h-bold-2,.h-bold-3,.h-bold-4,.h-bold-5,.h-bold-6{\n            font-weight: 700 !important;\n        }\n        .h-exbold-1,.h-exbold-2,.h-exbold-3,.h-exbold-4,.h-exbold-5,.h-exbold-6{\n            font-weight: 800 !important;\n        }\n        `;\n    }\n    // Tablet.\n    fontSize = $(`[name='${SELECTOR['FONTSIZE' + heading]}-tablet']`).val();\n    if (fontSize != '') {\n        content += `\\n\n            @media screen and (min-width: ${Utils.deviceWidth.sm + 1}px)\n            and (max-width: ${Utils.deviceWidth.md}px) {\n                ${tag} {\n                    font-size: ${fontSize}rem;\n                }\n            }\n        `;\n    }\n    return content;\n}\n\n/**\n * Hide or unhide weight settings.\n */\n\nfunction weightsettingsvisibility() {\n    let show = $(SELECTOR.HEADINGADVSETTINGS).is(\":checked\");\n\n    $(SELECTOR.WEIGHTEREGULAR)\n        .closest(SELECTOR.SETTINGITEM)\n        .toggleClass(SELECTOR.DNONE, !show);\n\n    $(SELECTOR.WEIGHTESEMIBOLD)\n        .closest(SELECTOR.SETTINGITEM)\n        .toggleClass(SELECTOR.DNONE, !show);\n\n    $(SELECTOR.WEIGHTEBOLD)\n        .closest(SELECTOR.SETTINGITEM)\n        .toggleClass(SELECTOR.DNONE, !show);\n\n    $(SELECTOR.WEIGHTEEXBOLD)\n        .closest(SELECTOR.SETTINGITEM)\n        .toggleClass(SELECTOR.DNONE, !show);\n\n    $(SELECTOR.WEIGHTDIVIDER)\n        .closest(SELECTOR.SETTINGITEM)\n        .toggleClass(SELECTOR.DNONE, !show);\n}\n\n\n/**\n * Apply settings.\n */\nfunction apply() {\n    headings.forEach(function (heading) {\n        weightsettingsvisibility();\n        if (heading == 'all') {\n            return;\n        }\n        Utils.putStyle(SELECTOR.HEADING + heading, getContent(heading));\n    });\n}\n\n\n\n/**\n * Initialize events.\n */\nfunction init() {\n    var select = [];\n    var color = [];\n    headings.forEach(function(heading) {\n        select.push(`\n            ${SELECTOR['FONTFAMILY' + heading]},\n            [name='${SELECTOR['FONTSIZE' + heading]}'],\n            [name='${SELECTOR['FONTSIZE' + heading]}-tablet'],\n            [name='${SELECTOR['FONTSIZE' + heading]}-mobile'],\n            ${SELECTOR['TEXTTRANSFORM' + heading]},\n            ${SELECTOR['LINEHEIGHT' + heading]},\n            ${SELECTOR['CUSTOMCOLOR' + heading]}\n        `);\n        color.push(SELECTOR['TEXTCOLOR' + heading]);\n    });\n\n    $(select.join(', ')).on('input', function() {\n        let heading = $(this).attr('name').split('-').splice(2, 1)[0];\n        if (heading == 'all') {\n            apply();\n            return;\n        }\n        Utils.putStyle(SELECTOR.HEADING + heading, getContent(heading));\n    });\n\n    $(color.join(', ')).on('color.changed', function() {\n        let heading = $(this).attr('name').split('-').splice(2, 1)[0];\n        if (heading == 'all') {\n            apply();\n            return;\n        }\n        Utils.putStyle(SELECTOR.HEADING + heading, getContent(heading));\n    });\n    $(SELECTOR.HEADINGADVSETTINGS).on('change', function () {\n        weightsettingsvisibility();\n        apply();\n    });\n\n    $(SELECTOR.WEIGHTEREGULAR).on('change', function () {\n        apply();\n    });\n\n    $(SELECTOR.WEIGHTESEMIBOLD).on('change', function () {\n        apply();\n    });\n\n    $(SELECTOR.WEIGHTEBOLD).on('change', function () {\n        apply();\n    });\n\n    $(SELECTOR.WEIGHTEEXBOLD).on('change', function () {\n        apply();\n    });\n}\n\nexport default {\n    init,\n    apply\n};\n"],"names":["headings","SELECTOR","HEADING","HEADINGADVSETTINGS","WEIGHTEREGULAR","WEIGHTESEMIBOLD","WEIGHTEBOLD","WEIGHTEEXBOLD","WEIGHTDIVIDER","SETTINGITEM","DNONE","Utils","getDocument","getContent","heading","fontSize","fontFamily","val","toLowerCase","FONTFAMILYall","tags","num","replace","forEach","type","push","tag","join","content","advsettings","weightregular","weightsemibold","weightbold","weightexbold","loadFont","textTransform","TEXTTRANSFORMall","lineHeight","customcolor","is","closest","slideDown","slideUp","textColor","TEXTCOLORall","deviceWidth","sm","md","weightsettingsvisibility","show","toggleClass","apply","putStyle","init","select","color","on","this","attr","split","splice"],"mappings":"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"}