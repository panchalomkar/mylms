<script language="JavaScript" src="https://code.jquery.com/jquery-3.7.0.js" type="text/javascript"></script>
<style>.star-rating {
  line-height:32px;
  font-size:1.25em;
}
.star-rating .fa-star{color: orange;}</style>
<div id="smelearderfeedbackmodal" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                <h4 class="modal-title">Comments and Rating</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                      <label for="exampleFormControlTextarea1">Type Comments </label>
                      <textarea class="form-control" id="feedbackmessagetext" rows="3"></textarea>
                    </div>
                </div>
                  <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                    <div class="star-rating">
                        <span class="fa fa-star-o" data-rating="1"></span>
                        <span class="fa fa-star-o" data-rating="2"></span>
                        <span class="fa fa-star-o" data-rating="3"></span>
                        <span class="fa fa-star-o" data-rating="4"></span>
                        <span class="fa fa-star-o" data-rating="5"></span>
                        <input type="hidden" name="whatever1" class="rating-value" value="2.56" id="ratingid">
                    </div>
                    </div>
                </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary" id="submitfeedback">Send <i class="fa fa-paper-plane" aria-hidden="true"></i></button>
                </div>
            </div>
        </div>
    </div>
    {{#js}}
require(['jquery', 'core/ajax', 'core/notification', 'core/str'], function($, ajax, notification, str) {

  $(document).ready(function(){
    var show_btn=$('.smeleaderfeedback');
    var show_btn=$('.smeleaderfeedback');
    
      show_btn.click(function(){
        $("#smelearderfeedbackmodal").modal('show');
    })
  });
  
  $(function() {
          $('.smeleaderfeedback').on('click', function( e ) {
              var userid = $(this).attr("value");
              $('#submitfeedback').on('click', function( e ) {
                 $(this).prop("disabled", true);
                  // add spinner to button
                  $(this).html(
                    `<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Loading...`
                  );
                      var textareavalue = $('#feedbackmessagetext').val();
                      var ratingvalue = $('#ratingid').val();
                      $.ajax({
                                  url: M.cfg.wwwroot + "/local/mydashboard/smeleadfeedback.php",
                                  type: 'POST',
                                  data: {userid: userid, textareavalue: textareavalue, ratingvalue: ratingvalue},
                                  success: function (response) {
                                          window.location.reload();
                                  }
                              });
                  });
                 
              e.preventDefault();
          });
      });

      var $star_rating = $('.star-rating .fa');
var SetRatingStar = function() {
  return $star_rating.each(function() {
    if (parseInt($star_rating.siblings('input.rating-value').val()) >= parseInt($(this).data('rating'))) {
      return $(this).removeClass('fa-star-o').addClass('fa-star');
    } else {
      return $(this).removeClass('fa-star').addClass('fa-star-o');
    }
  });
};
$star_rating.on('click', function() {
  $star_rating.siblings('input.rating-value').val($(this).data('rating'));
  return SetRatingStar();
});
SetRatingStar();

 })
{{/js}}