define(["jquery","core/templates","core/str","core/modal_factory","core/modal_events","core/ajax","core/yui"],function(e,t,r,i,a,s,c){return{load:function(t){e(document).on("click","#addrow",function(t){t.preventDefault();var r=e(this).parent().parent().parent().attr("id");r=parseInt(r)+1;var i=new Date,a=i.getMonth()+1,s=i.getDate(),c='<div class="m-4 formrow" id="div'+r+'"><div class="row g-4"><div class="col-2"> <select class="form-control" did="cid'+r+'" name="course[]" id="course-select-'+r+'"  required></select></div><div class="col-3">   <input type="date" name="dates[]" min="'+(i.getFullYear()+"-"+(a<10?"0":"")+a+"-"+(s<10?"0":"")+s)+'" class="form-control datepickerclass" placeholder="Date" required></div><div class="col-2">   <input type="time" name="starttime[]" id="st'+r+'" tagid="'+r+'" class="form-control timepicker" placeholder="Start Time" required></div><div class="col-2">    <input type="time" name="endtime[]" id="et'+r+'" tagid="'+r+'" class="form-control timepicker" placeholder="End Time" required></div><div><input type="number" min="1" name="max_user[]" class="form-control" value="10" required style="width:75px;"></div><div class="col-2">   <button class="btn btn-secondary removediv" id="'+r+'">Remove</button></div></div></div>';e("#slotform").append(c),e.ajax({url:"ajax.php",dataType:"html",data:{id:r,action:"get_courses_option"},success:function(t){t=JSON.parse(t),e("body #course-select-"+t[0]).html(t[1]),e("body #course-select-"+t[0]).select2()}})}),e(document).on("click",".removediv",function(t){t.preventDefault();var r=e(this).attr("id");e("#div"+r).remove()}),e(document).on("click",".getplist",function(t){t.preventDefault();var r=e(this).attr("schid");e("body .participantlist").html(""),r&&e.ajax({type:"post",url:"ajax.php",data:{schid:r,action:"getparticipant"},success:function(t){e("body .participantlist").html(t)}})}),e(document).on("submit","#scheduletask_form",function(t){t.preventDefault(),e.ajax({type:"post",url:"ajax.php?action=save_data",data:e("form").serialize(),success:function(e){1==e?window.location.href="table.php?success=1":alert(e)}})}),e('form[id="scheduletask_form"]').validate({rules:{course:"required",dates:"required",starttime:"required",endtime:"required",max_user:"required"},messages:{course:"required",dates:"required",starttime:"required",endtime:"required",max_user:"required"},submitHandler:function(e){e.submit()}})}}});