define("local_edwiserpagebuilder/remuiblck/task_view",["jquery","core/ajax","core/notification","core/templates","core/modal_factory","core/modal_events","core/fragment","local_edwiserpagebuilder/remuiblck/modal_task_popup","local_edwiserpagebuilder/remuiblck/events"],(function($,ajax,Notification,Templates,ModalFactory,ModalEvents,Fragment,ModalTaskPopup,RemuiblckEvents){var SELECTORS_TASK_CONTAINER='[data-region="task-list"]',SELECTORS_PANEL=".panel",SELECTORS_TASK_PROCESSING=".task-processing",SELECTORS_SHEDULE_TASK_BTN='.filters [data-region="add-schedule-task"]',TEMPLATES_TASK_LIST_ITEMS="local_edwiserpagebuilder/remuiblck/task-list-items",PROMISES_GET_USER_TASKS=function(duration,status,search){return ajax.call([{methodname:"local_edwiserpagebuilder_remuiblck_action",args:{action:"get_user_tasks",config:JSON.stringify({duration:duration,status:status,search:search})}}])[0]},loadTasks=function(root){var duration=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"today",status=arguments.length>1&&void 0!==arguments[2]?arguments[2]:"all",search=arguments.length>1&&void 0!==arguments[3]?arguments[3]:"";PROMISES_GET_USER_TASKS(duration,status,search).done((function(response){(response=JSON.parse(response)).tasks=Object.values(response.tasks),0==response.tasks.length?(response.no_tasks_image=M.util.image_url("empty_task_list","local_edwiserpagebuilder"),$(root+" "+SELECTORS_SHEDULE_TASK_BTN).addClass("d-none")):$(root+" "+SELECTORS_SHEDULE_TASK_BTN).removeClass("d-none"),Templates.render(TEMPLATES_TASK_LIST_ITEMS,response).done((function(html){$(root).find(SELECTORS_TASK_CONTAINER).html(html),toggleTaskProcessing(root)})).fail((function(ex){Notification.exception(ex),toggleTaskProcessing(root)}))})).fail((function(ex){Notification.exception(ex),toggleTaskProcessing(root)}))},toggleTaskProcessing=function(root){var show=arguments.length>1&&void 0!==arguments[1]&&arguments[1];$(root).parents(SELECTORS_PANEL).find(SELECTORS_TASK_PROCESSING).toggleClass("show",show)};return{init:function(root){loadTasks(root)},loadTasks:loadTasks,toggleTaskProcessing:toggleTaskProcessing}}));

//# sourceMappingURL=task_view.min.js.map