define("local_edwiserpagebuilder/remuiblck/modal_task_popup",["jquery","core/notification","core/custom_interaction_events","local_edwiserpagebuilder/remuiblck/modal","core/modal_registry","local_edwiserpagebuilder/remuiblck/events"],(function($,Notification,CustomEvents,Modal,ModalRegistry,RemuiblckEvents){var registered=!1,SELECTORS_SAVE_BUTTON='[data-action="save"]',SELECTORS_DELETE_BUTTON='[data-action="delete"]',SELECTORS_CANCEL_BUTTON='[data-action="cancel"]',SELECTORS_SUBJECT='[name="subject"]',SELECTORS_SUMMARY='[name="summary"]',SELECTORS_DAY='[name="timedue[day]"]',SELECTORS_MONTH='[name="timedue[month]"]',SELECTORS_YEAR='[name="timedue[year]"]',SELECTORS_VISIBLE='[name="visible"]',SELECTORS_NOTIFY='[name="notify"]',SELECTORS_USERS='[name="userlist[]"]',TASK=function(root){Modal.call(this,root),this.getFooter().find(SELECTORS_SAVE_BUTTON).length||Notification.exception({message:M.util.get_string("nosavebutton","local_edwiserpagebuilder")})};return TASK.TYPE="local_edwiserpagebuilder-task",(TASK.prototype=Object.create(Modal.prototype)).constructor=TASK,TASK.prototype.registerEventListeners=function(){Modal.prototype.registerEventListeners.call(this);let _this=this;this.getModal().on(CustomEvents.events.activate,SELECTORS_SAVE_BUTTON,(function(){_this.getModal().trigger(RemuiblckEvents.TASK_SAVE)})),this.getModal().on(CustomEvents.events.activate,SELECTORS_DELETE_BUTTON,(function(){_this.getModal().trigger(RemuiblckEvents.TASK_DELETE)})),this.getModal().on(CustomEvents.events.activate,SELECTORS_CANCEL_BUTTON,(function(){_this.getModal().trigger(RemuiblckEvents.TASK_CANCEL)}))},TASK.prototype.valid_settings=function(){let valid=!0;return valid=""!=this.getModal().find(SELECTORS_SUBJECT).val(),this.getModal().find(SELECTORS_SUBJECT)[0].dispatchEvent(new CustomEvent("blur")),valid},TASK.prototype.get_task_settings=function(){return{subject:this.getModal().find(SELECTORS_SUBJECT).val(),summary:this.getModal().find(SELECTORS_SUMMARY).val(),timedue:function(modal){let datetime=modal.find(SELECTORS_YEAR).val(),month=modal.find(SELECTORS_MONTH).val(),day=modal.find(SELECTORS_DAY).val();return datetime+="-"+(month<10?"0"+month:month),datetime+="-"+(day<10?"0"+day:day),datetime+=-1!=navigator.vendor.indexOf("Apple")?"T23:59:59":" 23:59:59",(-1!=navigator.vendor.indexOf("Apple")?Date.parse(datetime):new Date(datetime).getTime())/1e3}(this.getModal()),visible:this.getModal().find(SELECTORS_VISIBLE).is(":checked"),notify:this.getModal().find(SELECTORS_NOTIFY).is(":checked"),users:this.getModal().find(SELECTORS_USERS).val()}},TASK.prototype.saving=function(){var action=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];let button=this.getModal().find(SELECTORS_SAVE_BUTTON);if(1==action)return button.text(M.util.get_string("saving","core_repository")).attr("disabled","disabled"),void button.attr("disabled",!0);button.attr("disabled",!1),button.text(M.util.get_string("save","core_repository")).removeAttr("disabled")},registered||(ModalRegistry.register(TASK.TYPE,TASK,"local_edwiserpagebuilder/remuiblck/modal_task_popup"),registered=!0),TASK}));

//# sourceMappingURL=modal_task_popup.min.js.map