define(["jquery","theme_remui/select2","jqueryui","core/str"],function(s,t,a,e){function n(t,a){var e=document.location.pathname.match(/[^\/]+$/)[0];s.ajax({url:M.cfg.wwwroot+"/local/mt_dashboard/ajax/ajax.php",data:{searchdata:t,suspend:a},dataType:"json",type:"POST",success:function(t){if(""!=t){var n="";n+="<ul class='companylist'>",s.each(t,function(t,a){if(""!==a){var e=M.cfg.wwwroot+"/local/mt_dashboard/edit.php?companyss="+t+"&company="+t;n+="<li>"+("<a id='ui-id-'"+t+"'  href="+e+">"+a+"</a>")+"</li>"}}),n+="</ul>",s(".getlist").append(n)}else{var a="";a+="<ul class='companylist'><li>","index.php"!==e&&(a+="<li class='back'><a href='"+M.cfg.wwwroot+"/local/mt_dashboard/index.php?companyss=0&company=0'>"+M.util.get_string("backtotenant","local_mt_dashboard")+"</a></li>"),a+="<li>"+M.util.get_string("norecordfound","local_mt_dashboard")+"</li>",a+="</ul>",s(".getlist").append(a)}}})}e.get_strings([{key:"backtotenant",component:"local_mt_dashboard"},{key:"norecordfound",component:"local_mt_dashboard"}]);return{init:function(){s(document).ready(function(){if(s("input#companyid").val(jQuery("select#menucompanyss option:selected").val()),s("input#showsuspendedcompanies").change(function(){this.form.submit()}),s("select#menucompanyss").change(function(){s("input#companyid").val(this.value),this.form.submit()}),s("#showsuspendedcompanies").is(":checked"))var a=s("#showsuspendedcompanies").val();else a="0";s(document).on("click","#search-mt",function(t){s(".getlist").html(""),s(".getlist").show(),n(s(this).val(),a)}),s(document).on("keyup","#search-mt",function(t){s(".getlist").html(""),s(".getlist").addClass("showli"),n(s(this).val(),a)}),s(document).click(function(t){var a=s("#search-mt");a.is(t.target)||0!==a.has(t.target).length||s(".getlist").hide()})})}}});