function show_team_users(e){if(0==e||null==e)return $("#assignedusersbox").empty(),$("#availableusersbox").empty(),!1;var a={};a.managerid=e,a.action="showusers";var s=M.cfg.wwwroot+"/local/my_team/ajax/my_team_ajax.php";return $.ajax({method:"POST",url:s,data:a,dataType:"json",async:!1}).done(function(e){$("#assignedusersbox").empty(),$("#availableusersbox").empty(),"success"==e.status&&($.each(e.assignedusers,function(e,a){$("#assignedusersbox").append($('<option class="assigned-users-option">').val(e).text(a.firstname+" "+a.lastname+" ( "+a.email+" )"))}),$.each(e.availableusers,function(e,a){$("#availableusersbox").append($('<option class="available-users-option">').val(e).text(a.firstname+" "+a.lastname+" ( "+a.email+" )"))}))}),!1}function done_search_typing(e,a){var s=$("#"+a+"userssearch").val(),n={};n.managerid=e,n.action="searchusers",n.search=s,n.searchin=a;var o=M.cfg.wwwroot+"/local/my_team/ajax/my_team_ajax.php";return $.ajax({method:"POST",url:o,data:n,dataType:"json",async:!1}).done(function(e){var s=$("#"+a+"usersbox").val();if($("#"+a+"usersbox").empty(),"success"==e.status){var n="";$.each(e.users,function(e,o){n=-1!==$.inArray(o.id,s)?" selected":"",console.log(o),$("#"+a+"usersbox").append($('<option class="'+a+'-users-option" '+n+">").val(e).text(o.firstname+" "+o.lastname+" ( "+o.email+" )"))})}}),!1}define(["jquery","jqueryui","core/str"],function(e,a,s){return{init:function(){e(document).ready(function(){var a;e(document).on("change","#select_team",function(){show_team_users(e("#select_team option:selected").val())}),e(document).on("click","#addtoteam",function(){var a=e("#select_team option:selected").val(),s=e("#availableusersbox").val();if(0==a||null==a)return console.log("manager id not found"),!1;if(""==s||null==s)return console.log("users not found"),!1;var n={};n.managerid=a,n.action="assignusers",n.users=s;var o=M.cfg.wwwroot+"/local/my_team/ajax/my_team_ajax.php";e.ajax({method:"POST",url:o,data:n,dataType:"json",async:!1}).done(function(a){if("success"==a.status){var s=e("#availableusersbox").find("option:selected");e.each(s,function(a,s){e("#assignedusersbox").append(e('<option class="assigned-users-option">').val(s.value).text(s.innerText))}),e("#availableusersbox").find("option:selected").remove()}})}),e(document).on("click","#removefromteam",function(){var a=e("#select_team option:selected").val(),s=e("#assignedusersbox").val();if(0==a||null==a)return console.log("manager id not found"),!1;if(""==s||null==s)return console.log("users not found"),!1;var n={};n.managerid=a,n.action="removeusers",n.users=s;var o=M.cfg.wwwroot+"/local/my_team/ajax/my_team_ajax.php";e.ajax({method:"POST",url:o,data:n,dataType:"json",async:!1}).done(function(a){if("success"==a.status){var s=e("#assignedusersbox").find("option:selected");e.each(s,function(a,s){e("#availableusersbox").append(e('<option class="assigned-users-option">').val(s.value).text(s.innerText))}),e("#assignedusersbox").find("option:selected").remove()}})}),e(document).on("input","#assigneduserssearch, #availableuserssearch",function(){clearTimeout(a),a=setTimeout(()=>{var a=e(this).attr("id").replace("userssearch",""),s=e("#select_team option:selected").val();if(0==s||null==s)return console.log("manager id not found"),!1;done_search_typing(s,a)},1e3)})})}}});