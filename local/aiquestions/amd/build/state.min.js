define(["jquery","core/ajax","core/templates","core/str"],function($,Ajax,Templates,str){var intervalId=setInterval(function(){checkState(intervalId)},2e4);function checkState(intervalId){var userid=$("#local_aiquestions_userid")[0].outerText;var uniqid=$("#local_aiquestions_uniqid")[0].outerText;var promises=Ajax.call([{methodname:"local_aiquestions_check_state",args:{userid:userid,uniqid:uniqid}}]);promises[0].then(function(showSuccess){if(showSuccess[0].success!=""){var successmessage=JSON.parse(showSuccess[0].success);if(Object.keys(successmessage).length==1){var single=true}else{var single=false}if(showSuccess[0].success=="0"){var error=showSuccess[0].tries}else{var error=""}Templates.render("local_aiquestions/success",{success:successmessage,wwwroot:M.cfg.wwwroot,error:error,single:single}).then(function(html){$("#local_aiquestions_success").html(html)});clearInterval(intervalId)}if(showSuccess[0].tries!==null){if(showSuccess[0].success!=""){var percent=100}else{var percent=Math.round(showSuccess[0].tries/showSuccess[0].numoftries*100)}Templates.render("local_aiquestions/info",{tries:showSuccess[0].tries,numoftries:showSuccess[0].numoftries,percent:percent}).then(function(html){$("#local_aiquestions_info").html(html)})}})}});
//# sourceMappingURL=build/state.min.js.map